# Changelog

Все значимые изменения в проекте JAB Martial Arts будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.13.0] - 2025-01-15

### Добавлено
- **Система "На ремонте"** - новый компонент UnderMaintenance для секций без данных
- **Хук useUnderMaintenance** - управление состоянием ремонта с retry функциональностью
- **Умная система повторов** - 3 попытки загрузки с задержкой 2 секунды между попытками
- **Консистентный UX** - все секции следуют принципу "данные PocketBase или ремонт"
- **Отслеживание прогресса** - показывает номер текущей попытки (например, "Попытка 2 из 3")
- **JAB брендинг** - стилизация в соответствии с дизайн-системой JAB

### Изменено
- **LocationsSection** - убраны mock данные о залах, добавлен режим ремонта
- **HallOfFameSection** - убраны mock данные о спортсменах, добавлен режим ремонта
- **FAQSection** - убраны fallback вопросы и категории, добавлен режим ремонта
- **TrainersSection** - убраны fallback данные о тренерах, добавлен режим ремонта
- **NewsSection** - убраны fallback данные о новостях, добавлен режим ремонта
- **ScheduleSection** - убраны fallback данные о расписании, добавлен режим ремонта
- **AboutSection** - убраны fallback значения текстов, добавлен режим ремонта
- **HeroSection** - убраны fallback значения текстов, добавлен режим ремонта

### Удалено
- **Все fallback данные** - полностью убраны mock и fallback данные из всех секций
- **Статические значения** - убраны хардкод значения, заменены на условные операторы
- **Избыточная логика** - упрощена логика загрузки данных

### Исправлено
- **Обработка ошибок** - улучшена обработка ошибок загрузки данных
- **Состояния загрузки** - исправлены состояния загрузки и ремонта
- **Типизация** - исправлены ошибки TypeScript в новых компонентах

## [1.12.0] - 2025-01-15

### Добавлено
- **Система прелоудера с PocketBase** - полное управление через CMS
- **Динамические настройки** - настраиваемая длительность, цвета и текст через админку
- **Умный текст загрузки** - настраиваемый текст с автоматическим скрытием через 2 секунды
- **Система fallback** - 3-секундный fallback если PocketBase недоступен
- **Поддержка видео** - опциональная загрузка видеофайла с автовоспроизведением
- **Настройка цветов** - полностью настраиваемые цвета фона и текста
- **Адаптивный дизайн** - идеальное отображение на всех устройствах

### Изменено
- **Компонент Preloader** - полностью переработан для работы с PocketBase
- **Интерфейс PreloaderSettings** - добавлен в pocketbase.ts
- **Функция getPreloaderSettings** - новая функция для получения настроек
- **Логика отображения** - улучшена логика показа/скрытия элементов

### Исправлено
- **Ошибка 400** - исправлена ошибка при запросе настроек прелоудера
- **Отображение loading_text** - исправлено отображение текста загрузки
- **Типизация** - исправлены ошибки TypeScript в getFullList

## [1.11.0] - 2025-01-15

### Добавлено
- **Переработанная система карточек локаций** - минималистичный и стильный дизайн
- **Полная интеграция с PocketBase** - управление всем контентом через CMS
- **Динамические изображения** - поддержка пользовательских фото с fallback на статические
- **Умная фильтрация** - клик "Записаться" фильтрует расписание по локации
- **Настраиваемая прозрачность оверлея** - поле overlay_opacity (0-100) в PocketBase
- **Упрощенные поля** - убраны ненужные поля (метро, время пешком, часы работы)
- **JAB типографика** - консистентное использование hero-jab-title и hero-jab-text классов
- **Адаптивный дизайн** - идеальное отображение на всех устройствах с плавными анимациями

### Изменено
- **Визуальные улучшения** - градиентные фоны JAB красного цвета для большинства карточек
- **Поддержка изображений** - специальная обработка для "Сопка" (sopka.webp) и "Локомотив" (loco.jpg)
- **Система оверлеев** - динамическая прозрачность оверлея для лучшей читаемости текста
- **Hover эффекты** - плавные переходы и масштабирование
- **Декоративные элементы** - JAB-стиль плавающих элементов с размытием

### Техническое
- **Обновлен интерфейс Location** - новые поля для overlay_opacity и упрощенная структура
- **Коллекции PocketBase** - обновлена коллекция locations с новой конфигурацией полей
- **Система fallback** - корректная деградация при недоступности данных PocketBase
- **Type Safety** - полная поддержка TypeScript с правильными определениями интерфейсов
- **Обновлена документация** - инструкции PocketBase с новыми полями и настройками

### Исправлено
- Убраны избыточные поля из карточек локаций
- Улучшена читаемость текста с помощью настраиваемых оверлеев
- Оптимизирована структура данных для лучшей производительности

## [1.10.0] - 2025-01-15

### Добавлено
- **Зал славы** - новая секция с лучшими спортсменами клуба
- Коллекция PocketBase `hall_of_fame` для управления спортсменами
- Компонент `HallOfFameSection` с красивым дизайном в стиле JAB
- Система рангов (1-10) с цветовой кодировкой (золото, серебро, бронза)
- Статусы спортсменов: "Активный", "Завершил карьеру", "Тренер"
- Особые упоминания для выдающихся спортсменов
- Адаптивная сетка карточек с hover эффектами
- Анимации появления карточек с задержкой
- Призыв к действию в конце секции
- Интеграция с PocketBase для динамического контента

### Изменено
- Обновлена структура MainRenderer с добавлением HallOfFameSection
- Расширены интерфейсы TypeScript с новым HallOfFame
- Обновлена документация PocketBase с описанием коллекции hall_of_fame
- Добавлены примеры данных для тестирования Hall of Fame

### Техническое
- Добавлены функции `getHallOfFame()`, `getStatusIcon()`, `getRankColor()`, `getRankBackground()`
- Поддержка rich text в достижениях спортсменов
- Оптимизированная загрузка изображений с fallback
- Responsive дизайн для всех устройств
- CSS анимации fadeInUp для плавного появления карточек

## [1.9.0] - 2025-01-15

### Добавлено
- Новая промо секция для детей с полноэкранным фоном
- Коллекция PocketBase `promo_section` для управления контентом промо секции
- Две кнопки действий: "Связаться с нами" и "Поддержать"
- Анимации появления при скролле с Intersection Observer
- Декоративные элементы в стиле JAB (красные и синие акценты)
- Адаптивный дизайн для всех устройств
- Fallback контент при отсутствии данных из PocketBase
- Инструкция по созданию бэкапов в `notes_and_docs/manuals/backup/`
- **Мобильная "peek" функциональность** - карточка выдвигается снизу вверх
- **Интерактивные анимации** - bounce эффект для стрелки, hover эффекты
- **Анимация подглядывания** - карточка слегка высовывается при фокусе на секции
- **Динамическое позиционирование** - поддержка card_width и card_position из PocketBase
- **Прозрачность для мобильных** - улучшенная видимость фонового изображения

### Изменено
- Обновлена структура MainRenderer с добавлением PromoSection после PunchingBagSection
- Расширены интерфейсы PocketBase с новым PromoSection
- Обновлена документация проекта до версии 1.9.0
- **Синхронизирована версия** в package.json с документацией (1.9.0)
- **Улучшена мобильная UX** - карточка показывает только заголовок, остальное по клику
- **Оптимизированы анимации** - плавные переходы и индикаторы интерактивности

### Исправлено
- Удалены неправильные папки бэкапов с вложенной структурой
- Созданы правильные бэкапы в формате tar.gz
- **Исправлено позиционирование** мобильной карточки (absolute вместо fixed)
- **Устранены зазоры** между секциями и карточкой
- **Исправлен margin collapse** - заменен margin на padding
- **Убраны лишние стили** - оптимизированы CSS классы и анимации

## [1.8.0] - 2025-01-15

### Добавлено
- Динамическая система FAQ с категориями и цветовыми схемами
- Новые коллекции PocketBase: `faq` и `faq_categories`
- Поддержка русских названий цветовых тем (красная, синяя, зеленая, оранжевая, фиолетовая, желтая)
- Rich text ответы с правильным отображением абзацев
- Цветные бейджи категорий с наследованием от цветовых схем
- Адаптивный аккордеон для вопросов и ответов

### Изменено
- Исправлено отображение HTML в ответах FAQ (убраны сырые HTML теги)
- Добавлены CSS стили для правильных отступов между абзацами
- Оптимизирована логика получения цветовых тем из expand данных
- Улучшена функция `getCategoryColor` с поддержкой русских названий

### Исправлено
- Проблема с отображением HTML entities (`&nbsp;`, `&amp;` и т.д.)
- Неправильные отступы между абзацами в rich text контенте
- Отсутствие цветовых схем для категорий FAQ

## [1.7.0] - 2025-01-15

### Добавлено
- Динамический раздел "О школе" с полной интеграцией PocketBase
- Новые коллекции PocketBase: `about_page` и `about_cards`
- Карточки с фоновыми изображениями и затемненными оверлеями
- Система управления контентом для раздела "О школе"
- Поддержка rich text форматирования в описаниях карточек

### Изменено
- Оптимизирована композиция карточек с правильными отступами
- Убрана зависимость от цветовых схем для карточек "О школе"
- Все карточки теперь используют единый стиль JAB (красные границы)
- Улучшена обработка HTML контента из PocketBase rich text editor

### Исправлено
- Критическая проблема с покрытием оверлея на мобильных устройствах
- Использование CSS псевдоэлементов для корректного позиционирования
- Границы карточек теперь создаются через `::after` псевдоэлемент
- Оверлей создается через `::before` псевдоэлемент для идеального покрытия

### Техническое
- Обновлены интерфейсы TypeScript для новых коллекций
- Добавлены функции `getAboutPage()` и `getAboutCards()` в PocketBase библиотеку
- Улучшена функция `sanitizeHtmlForDisplay()` для поддержки дополнительных HTML тегов
- Оптимизированы z-index значения для корректной иерархии слоев

## [1.6.0] - 2025-01-15

### Добавлено
- Система цветовых схем для динамического управления цветами
- Поддержка HEX цветов с прозрачностью
- Fallback система для обратной совместимости
- Интеграция цветовых схем с расписанием и уровнями подготовки

### Изменено
- Обновлена система уровней подготовки с цветовыми темами
- Улучшена система расписания с динамическими цветами
- Оптимизированы компоненты для работы с цветовыми схемами

## [1.5.0] - 2025-01-15

### Добавлено
- Динамическая Hero секция с PocketBase интеграцией
- Система управления контентом для главной страницы
- Поддержка изображений с fallback на плейсхолдер
- Настраиваемые тексты и ссылки

### Изменено
- Статичные цвета (красный/синий) для элементов Hero секции
- Адаптивный дизайн с анимациями
- Система загрузки с индикатором

## [1.4.0] - 2025-01-15

### Добавлено
- Система уровней подготовки с цветовыми схемами
- Поддержка slug для URL-дружественных ссылок
- Описания для каждого уровня
- Связь с цветовыми темами для визуального оформления

### Изменено
- Гибкая система сортировки и активации уровней
- Улучшена система расписания с поддержкой уровней

## [1.3.0] - 2025-01-15

### Добавлено
- Система расписания с отображением тренировок по дням недели
- Фильтрация по локациям, уровням и дням
- Поддержка множественных тренеров
- Динамические цветовые схемы для локаций и уровней

### Изменено
- Адаптивный дизайн с аккордеоном для мобильных устройств
- Улучшена производительность загрузки данных

## [1.2.0] - 2025-01-15

### Добавлено
- PocketBase интеграция для управления данными
- Система тренеров с профилями и фотографиями
- Базовая структура коллекций данных
- API функции для работы с PocketBase

### Изменено
- Миграция с статических данных на динамические
- Улучшена архитектура данных

## [1.1.0] - 2025-01-15

### Добавлено
- Базовая структура проекта Next.js 15.5.2
- React 19.1.0 с TypeScript 5
- Tailwind CSS 4 для стилизации
- Основные компоненты и страницы

### Изменено
- Настроена система сборки и разработки
- Добавлены базовые стили и компоненты

## [1.0.0] - 2025-01-15

### Добавлено
- Первоначальная версия проекта JAB Martial Arts
- Базовая структура и настройка проекта
- Документация и инструкции по развертыванию
